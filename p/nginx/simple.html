<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>
  <h5></h5>
  <span><a href="http://pm2.keymetrics.io/docs/tutorials/pm2-nginx-production-setup">生产环境下基于Nginx的配置</a> </span>
  <p>仅是为了简单跑通的配置</p>
  <p>修改/etc/nginx/conf.d/default.conf</p>
  <pre>
      <code>
        upstream my_nodejs_upstream {
            server 127.0.0.1:3001;
            keepalive 64;
        }

        server {
            listen 80;
            server_name my_nodejs_server;
            root /home/www/project_root;
            
            location / {
              proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
              proxy_set_header Host $http_host;
              proxy_set_header X-NginX-Proxy true;
              proxy_http_version 1.1;
              proxy_set_header Upgrade $http_upgrade;
              proxy_set_header Connection "upgrade";
              proxy_max_temp_file_size 0;
              proxy_pass http://my_nodejs_upstream/;
              proxy_redirect off;
              proxy_read_timeout 240s;
            }
        }

    </code>
  </pre>
</body>

</html>
